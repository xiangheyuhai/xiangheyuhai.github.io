[{"title":"学习笔记_2021蓝桥杯","date":"2021-03-30T14:55:46.000Z","path":"2021/03/30/学习笔记_2021蓝桥杯/","content":"<h1 id=\"使用资源包的工程\"><a href=\"#使用资源包的工程\" class=\"headerlink\" title=\"使用资源包的工程\"></a>使用资源包的工程</h1><p>直接用</p>\n<h1 id=\"自己建工程\"><a href=\"#自己建工程\" class=\"headerlink\" title=\"自己建工程\"></a>自己建工程</h1><p>##建文件夹</p>\n<p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210409173443478.png\" alt=\"image-20210409173443478\"></p>\n<p>##各个文件夹中添加文件</p>\n<p>CORE</p>\n<p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210409173605018.png\" alt=\"image-20210409173605018\"></p>\n<p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210409173741414.png\" alt=\"image-20210409173741414\"></p>\n<p>USER</p>\n<p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210409173828925.png\" alt=\"image-20210409173828925\"></p>\n<p>FWLIB</p>\n<p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210409173915737.png\" alt=\"image-20210409173915737\"></p>\n<p>USER</p>\n<a id=\"more\"></a>\n\n<p>​                <img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210409174102784.png\" alt=\"image-20210409174102784\"></p>\n<p>==复制并替换到USER中==</p>\n<p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210409174158382.png\" alt=\"image-20210409174158382\"></p>\n<h2 id=\"建工程\"><a href=\"#建工程\" class=\"headerlink\" title=\"建工程\"></a>建工程</h2><p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210409174409754.png\" alt=\"image-20210409174409754\"></p>\n<p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210409174453104.png\" alt=\"image-20210409174453104\"></p>\n<p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210409174524167.png\" alt=\"image-20210409174524167\"></p>\n<p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210409174544199.png\" alt=\"image-20210409174544199\"></p>\n<p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210409174617207.png\" alt=\"image-20210409174617207\"></p>\n<p>==注意：把工程保存在USER文件夹中==</p>\n<p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210409174703191.png\" alt=\"image-20210409174703191\"></p>\n<p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210409175042764.png\" alt=\"image-20210409175042764\"></p>\n<p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210409175134602.png\" alt=\"image-20210409175134602\"></p>\n<p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210409175156430.png\" alt=\"image-20210409175156430\"></p>\n<p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210409175252036.png\" alt=\"image-20210409175252036\"></p>\n<h2 id=\"一些必要的设置\"><a href=\"#一些必要的设置\" class=\"headerlink\" title=\"一些必要的设置\"></a>一些必要的设置</h2><p>修改编译器</p>\n<p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210409175554766.png\" alt=\"image-20210409175554766\"></p>\n<p>设置output</p>\n<p><img src=\"C:\\Users\\xiangheyuhai\\AppData\\Roaming\\Typora\\typora-user-images\\image-20210409181419119.png\" alt=\"image-20210409181419119\"></p>\n<p>​                    改到obj中</p>\n<p>添加头文件路径</p>\n<p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210409175627971.png\" alt=\"image-20210409175627971\"></p>\n<p>DEFINE:==STM32F10X_MD,USE_STDPERIPH_DRIVER==</p>\n<p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210409180025541.png\" alt=\"image-20210409180025541\"></p>\n<p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210409175804969.png\" alt=\"image-20210409175804969\"></p>\n<p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210409175937905.png\" alt=\"image-20210409175937905\"></p>\n<p>根据自己喜好清理main.c</p>\n<p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210409181120722.png\" alt=\"image-20210409181120722\"></p>\n<p>##编译</p>\n<p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210409181149918.png\" alt=\"image-20210409181149918\"></p>\n<h1 id=\"SYSTIC\"><a href=\"#SYSTIC\" class=\"headerlink\" title=\"SYSTIC\"></a>SYSTIC</h1><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&quot;SYSTIC.h&quot;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">static</span> __IO <span class=\"keyword\">uint32_t</span> TimingDelay;</span><br><span class=\"line\"><span class=\"keyword\">unsigned</span> <span class=\"keyword\">int</span> LCD_COUNT = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">SYSTIC_INIT</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\tSysTick_Config(SystemCoreClock / <span class=\"number\">1000</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">Delay</span><span class=\"params\">(__IO <span class=\"keyword\">uint32_t</span> nTime)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123; </span><br><span class=\"line\">  TimingDelay = nTime;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">while</span>(TimingDelay != <span class=\"number\">0</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">TimingDelay_Decrement</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (TimingDelay != <span class=\"number\">0x00</span>)</span><br><span class=\"line\">  &#123; </span><br><span class=\"line\">    TimingDelay--;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">SysTick_Handler</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">  TimingDelay_Decrement();</span><br><span class=\"line\">\tLCD_COUNT++;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (LCD_COUNT &gt;= <span class=\"number\">10</span>)<span class=\"comment\">//10ms刷新一次</span></span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tLCD_COUNT = <span class=\"number\">0</span>; LCD_FLAG = <span class=\"number\">1</span>;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h1 id=\"LED\"><a href=\"#LED\" class=\"headerlink\" title=\"LED\"></a>LED</h1><p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210322222712040.png\" alt=\"image-20210322222712040\"></p>\n<p>打开74HCT573，查看第七条真值表可知：LE为高，输出随输入改变；LE为低，输出不随输入改变</p>\n<p>再打开原理图，找到锁存器LE对应引脚为PD2</p>\n<p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210322223026510.png\" alt=\"image-20210322223026510\"></p>\n<p>8个LED对应的引脚</p>\n<p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210322223108136.png\" alt=\"image-20210322223108136\"></p>\n<p>配置LED_Init</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">LED_INIT</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    GPIO_InitTypeDef GPIO_InitStructure;</span><br><span class=\"line\">  \tRCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOD | RCC_APB2Periph_GPIOC, ENABLE);<span class=\"comment\">//使能</span></span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">//设置PD2为输出模式</span></span><br><span class=\"line\">    GPIO_InitStructure.GPIO_Pin = GPIO_Pin_2;</span><br><span class=\"line\">    GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class=\"line\">    GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;</span><br><span class=\"line\">    GPIO_Init(GPIOD, &amp;GPIO_InitStructure);\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">//设置PCx为输出模式</span></span><br><span class=\"line\">    GPIO_InitStructure.GPIO_Pin = GPIO_Pin_8 | GPIO_Pin_9 | GPIO_Pin_10 | GPIO_Pin_11 | \tGPIO_Pin_12 | GPIO_Pin_13 | GPIO_Pin_14 | GPIO_Pin_15;</span><br><span class=\"line\">    GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class=\"line\">    GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP;</span><br><span class=\"line\">    GPIO_Init(GPIOC, &amp;GPIO_InitStructure);\t</span><br><span class=\"line\">&#125; </span><br></pre></td></tr></table></figure>\n<p>控制全部的灯</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">LED_ALL_PRO</span><span class=\"params\">(<span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> ucLED)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\tGPIO_Write(GPIOC, ~ucLED&lt;&lt;<span class=\"number\">8</span>);</span><br><span class=\"line\">\tGPIO_SetBits(GPIOD, GPIO_Pin_2);\t\t\t<span class=\"comment\">//先拉高再拉低</span></span><br><span class=\"line\">\tGPIO_ResetBits(GPIOD, GPIO_Pin_2);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>控制单个灯</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">LED_ONE_PRO</span><span class=\"params\">(<span class=\"keyword\">uint16_t</span> LED_Num, <span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> state)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (state != <span class=\"number\">1</span>)\t<span class=\"comment\">//不为1--状态为灭--拉高</span></span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tGPIO_SetBits(GPIOC, LED_Num);</span><br><span class=\"line\">\t\tGPIO_SetBits(GPIOD, GPIO_Pin_2);</span><br><span class=\"line\">\t\tGPIO_ResetBits(GPIOD, GPIO_Pin_2);</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">\t<span class=\"keyword\">else</span>\t\t\t<span class=\"comment\">//为1--状态为亮--拉低</span></span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tGPIO_ResetBits(GPIOC, LED_Num);</span><br><span class=\"line\">\t\tGPIO_SetBits(GPIOD, GPIO_Pin_2);</span><br><span class=\"line\">\t\tGPIO_ResetBits(GPIOD, GPIO_Pin_2);\t</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>LED.h</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">ifndef</span> __LED_H</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> __LED_H</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&quot;stm32f10x.h&quot;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> LED1 GPIO_Pin_8</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> LED2 GPIO_Pin_9</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> LED3 GPIO_Pin_10</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> LED4 GPIO_Pin_11</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> LED5 GPIO_Pin_12</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> LED6 GPIO_Pin_13</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> LED7 GPIO_Pin_14</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> LED8 GPIO_Pin_15</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> LED_ALL GPIO_Pin_All</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">LED_INIT</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">LED_ALL_PRO</span><span class=\"params\">(<span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> ucLED)</span></span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">LED_ONE_PRO</span><span class=\"params\">(<span class=\"keyword\">uint16_t</span> LED_Num, <span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> state)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">endif</span></span></span><br></pre></td></tr></table></figure>\n<h1 id=\"KEY\"><a href=\"#KEY\" class=\"headerlink\" title=\"KEY\"></a>KEY</h1><p>对应的引脚</p>\n<p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210325020212683.png\" alt=\"image-20210325020212683\"></p>\n<p>由图知：检测为低时按键按下</p>\n<p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210325021256125.png\" alt=\"image-20210325021256125\"></p>\n<h2 id=\"配置KEY-INIT\"><a href=\"#配置KEY-INIT\" class=\"headerlink\" title=\"配置KEY_INIT\"></a>配置KEY_INIT</h2><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">KEY_INIT</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;\t</span><br><span class=\"line\">  GPIO_InitTypeDef GPIO_InitStructure;<span class=\"comment\">//使能</span></span><br><span class=\"line\">  RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA | RCC_APB2Periph_GPIOB, ENABLE);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">//设置PA0 PA8为浮空输入</span></span><br><span class=\"line\">  GPIO_InitStructure.GPIO_Pin = GPIO_Pin_0 | GPIO_Pin_8;</span><br><span class=\"line\">  GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class=\"line\">  GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN_FLOATING;</span><br><span class=\"line\">  GPIO_Init(GPIOA, &amp;GPIO_InitStructure);\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">//设置PB1 PB2为浮空输入</span></span><br><span class=\"line\">  GPIO_InitStructure.GPIO_Pin = GPIO_Pin_1 | GPIO_Pin_2;</span><br><span class=\"line\">  GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class=\"line\">  GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN_FLOATING;</span><br><span class=\"line\">  GPIO_Init(GPIOB, &amp;GPIO_InitStructure);</span><br><span class=\"line\">\t</span><br><span class=\"line\">    <span class=\"comment\">//初始化按键既不是长按，也不是短按</span></span><br><span class=\"line\">   KEY[<span class=\"number\">1</span>].Status = <span class=\"number\">2</span>;\tKEY[<span class=\"number\">2</span>].Status = <span class=\"number\">2</span>;</span><br><span class=\"line\">   KEY[<span class=\"number\">3</span>].Status = <span class=\"number\">2</span>;\tKEY[<span class=\"number\">4</span>].Status = <span class=\"number\">2</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h2 id=\"按键扫描\"><a href=\"#按键扫描\" class=\"headerlink\" title=\"按键扫描\"></a>按键扫描</h2><h3 id=\"第一种\"><a href=\"#第一种\" class=\"headerlink\" title=\"第一种\"></a>第一种</h3><p>==短按+长按一定时间执行某事件==</p>\n<p>#####KEY.C</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&quot;KEY.h&quot;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">_Bool</span> KEY_FLAG = <span class=\"number\">0</span>;</span><br><span class=\"line\">KeyType KEY[<span class=\"number\">5</span>];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">KEY_INIT</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\tGPIO_InitTypeDef GPIO_InitStructure;</span><br><span class=\"line\">  <span class=\"comment\">//使能</span></span><br><span class=\"line\">  RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA | RCC_APB2Periph_GPIOB, ENABLE);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">//设置PD2为输出模式</span></span><br><span class=\"line\">  GPIO_InitStructure.GPIO_Pin = GPIO_Pin_0 | GPIO_Pin_8;</span><br><span class=\"line\">  GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class=\"line\">  GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN_FLOATING;</span><br><span class=\"line\">  GPIO_Init(GPIOA, &amp;GPIO_InitStructure);\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">//设置PCx为输出模式</span></span><br><span class=\"line\">  GPIO_InitStructure.GPIO_Pin = GPIO_Pin_1 | GPIO_Pin_2;</span><br><span class=\"line\">  GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class=\"line\">  GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN_FLOATING;</span><br><span class=\"line\">  GPIO_Init(GPIOB, &amp;GPIO_InitStructure);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">KEY_SCAN</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (KEY_FLAG)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> i;</span><br><span class=\"line\">\t\tKEY_FLAG = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span> (i = <span class=\"number\">1</span>; i &lt;= <span class=\"number\">4</span>; i++)</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\tKEY_Refresh(i);<span class=\"comment\">//刷新读取电平\t\t</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (KEY[i].GPIO_READ == <span class=\"number\">0</span>) <span class=\"comment\">//进入循环后如果为KEYx为低电平，则为按下，再进一步判断长按短按</span></span><br><span class=\"line\">\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\tKEY[i].TIME++;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (KEY[i].TIME == <span class=\"number\">3</span>)</span><br><span class=\"line\">\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"built_in\">sprintf</span>((<span class=\"keyword\">char</span> *)LCD_SHOW, <span class=\"string\">&quot;TIME: %d    &quot;</span>, KEY[i].TIME);</span><br><span class=\"line\">\t\t\t\t\tLCD_DisplayStringLine(Line1, LCD_SHOW);</span><br><span class=\"line\">\t\t\t\t\tKEY[i].Status = <span class=\"number\">1</span>;\t<span class=\"comment\">//按键短按</span></span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span>(KEY[i].TIME &gt;= <span class=\"number\">70</span>)</span><br><span class=\"line\">\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"built_in\">sprintf</span>((<span class=\"keyword\">char</span> *)LCD_SHOW, <span class=\"string\">&quot;TIME: %d    &quot;</span>, KEY[i].TIME);</span><br><span class=\"line\">\t\t\t\t\tLCD_DisplayStringLine(Line1, LCD_SHOW);\t\t\t\t\t</span><br><span class=\"line\">\t\t\t\t\tKEY[i].Status = <span class=\"number\">2</span>;\t<span class=\"comment\">//按键长按</span></span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125;\t</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">else</span>\t<span class=\"comment\">//没有按下，计时清零，状态标志为没有按下</span></span><br><span class=\"line\">\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\tKEY[i].TIME = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\t\tKEY[i].Status = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\t&#125;\t\t</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">KEY_Refresh</span><span class=\"params\">(u8 i)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">//刷新读取电平</span></span><br><span class=\"line\">\t<span class=\"keyword\">switch</span> (i)</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">  \t<span class=\"keyword\">case</span> <span class=\"number\">1</span>:</span><br><span class=\"line\">\t\t\tKEY[<span class=\"number\">1</span>].GPIO_READ = KEY1;\t<span class=\"keyword\">break</span>;\t</span><br><span class=\"line\">  \t<span class=\"keyword\">case</span> <span class=\"number\">2</span>:</span><br><span class=\"line\">\t\t\tKEY[<span class=\"number\">2</span>].GPIO_READ = KEY2;\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">case</span> <span class=\"number\">3</span>:</span><br><span class=\"line\">  \t\t\tKEY[<span class=\"number\">3</span>].GPIO_READ = KEY3;\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">  \t<span class=\"keyword\">case</span> <span class=\"number\">4</span>:</span><br><span class=\"line\">  \t\t\tKEY[<span class=\"number\">4</span>].GPIO_READ = KEY4;\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">default</span>:</span><br><span class=\"line\">  \t\t\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">  &#125;\t\t</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>#####KEY.H</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">ifndef</span> __KEY_H</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> __KEY_H</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&quot;stm32f10x.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&quot;string.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&quot;SYS.h&quot;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> KEY1 GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_0)</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> KEY2 GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_8)</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> KEY3 GPIO_ReadInputDataBit(GPIOB, GPIO_Pin_1)</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> KEY4 GPIO_ReadInputDataBit(GPIOB, GPIO_Pin_2)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> SHORT 1</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> LONG  2</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">struct</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\">\t<span class=\"keyword\">uint8_t</span> GPIO_READ;</span><br><span class=\"line\">\t<span class=\"keyword\">unsigned</span> <span class=\"keyword\">int</span> TIME;</span><br><span class=\"line\">\t<span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> Status;</span><br><span class=\"line\">&#125;KeyType;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">extern</span> KeyType KEY[<span class=\"number\">5</span>];</span><br><span class=\"line\"><span class=\"keyword\">extern</span> <span class=\"built_in\">_Bool</span> KEY_FLAG;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">KEY_INIT</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">KEY_SCAN</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">KEY_Refresh</span><span class=\"params\">(u8 i)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">endif</span></span></span><br></pre></td></tr></table></figure>\n<h3 id=\"第二种：有点鸡肋，没必要\"><a href=\"#第二种：有点鸡肋，没必要\" class=\"headerlink\" title=\"第二种：有点鸡肋，没必要\"></a>第二种：有点鸡肋，没必要</h3><p>==短按+长按到达某一时间后松手执行某一事件==</p>\n<p>#####KEY.C</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&quot;KEY.h&quot;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">_Bool</span> KEY_FLAG = <span class=\"number\">0</span>;</span><br><span class=\"line\">KeyType KEY[<span class=\"number\">5</span>];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">KEY_INIT</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\tGPIO_InitTypeDef GPIO_InitStructure;</span><br><span class=\"line\">  <span class=\"comment\">//使能</span></span><br><span class=\"line\">  RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA | RCC_APB2Periph_GPIOB, ENABLE);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">//设置PD2为输出模式</span></span><br><span class=\"line\">  GPIO_InitStructure.GPIO_Pin = GPIO_Pin_0 | GPIO_Pin_8;</span><br><span class=\"line\">  GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class=\"line\">  GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN_FLOATING;</span><br><span class=\"line\">  GPIO_Init(GPIOA, &amp;GPIO_InitStructure);\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">//设置PCx为输出模式</span></span><br><span class=\"line\">  GPIO_InitStructure.GPIO_Pin = GPIO_Pin_1 | GPIO_Pin_2;</span><br><span class=\"line\">  GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class=\"line\">  GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN_FLOATING;</span><br><span class=\"line\">  GPIO_Init(GPIOB, &amp;GPIO_InitStructure);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">KEY_SCAN</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (KEY_FLAG)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t<span class=\"keyword\">int</span> i;</span><br><span class=\"line\">\t\tKEY_FLAG = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span> (i = <span class=\"number\">1</span>; i &lt;= <span class=\"number\">4</span>; i++)</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\tKEY_Refresh(i);\t</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (KEY[i].GPIO_READ == <span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">do</span></span><br><span class=\"line\">\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\tKEY[i].TIME++;</span><br><span class=\"line\">\t\t\t\t\tKEY_Refresh(i);\t\t\t\t\t\t</span><br><span class=\"line\">\t\t\t\t&#125;<span class=\"keyword\">while</span>(KEY[i].GPIO_READ == <span class=\"number\">0</span>);\t\t\t</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (KEY[i].TIME &lt;= <span class=\"number\">100000</span>) <span class=\"comment\">//这里的100000是把KEY[i].TIME打印出来之后判断得到的</span></span><br><span class=\"line\">\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\tKEY[i].TIME = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\t\t\tKEY[i].Status = <span class=\"number\">1</span>;\t\t<span class=\"comment\">//短按为1</span></span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(KEY[i].TIME &gt;= <span class=\"number\">100000</span>)</span><br><span class=\"line\">\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\tKEY[i].TIME = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\t\t\tKEY[i].Status = <span class=\"number\">2</span>;\t\t<span class=\"comment\">//长按为2</span></span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t&#125;\t</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">else</span> </span><br><span class=\"line\">\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\tKEY[i].TIME = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\t\tKEY[i].Status = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\t&#125;\t\t</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;\t\t</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">KEY_Refresh</span><span class=\"params\">(u8 i)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">//刷新读取电平</span></span><br><span class=\"line\">\t<span class=\"keyword\">switch</span> (i)</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">  \t<span class=\"keyword\">case</span> <span class=\"number\">1</span>:</span><br><span class=\"line\">\t\t\tKEY[<span class=\"number\">1</span>].GPIO_READ = KEY1;\t<span class=\"keyword\">break</span>;\t</span><br><span class=\"line\">  \t<span class=\"keyword\">case</span> <span class=\"number\">2</span>:</span><br><span class=\"line\">\t\t\tKEY[<span class=\"number\">2</span>].GPIO_READ = KEY2;\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">case</span> <span class=\"number\">3</span>:</span><br><span class=\"line\">  \t\t\tKEY[<span class=\"number\">3</span>].GPIO_READ = KEY3;\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">  \t<span class=\"keyword\">case</span> <span class=\"number\">4</span>:</span><br><span class=\"line\">  \t\t\tKEY[<span class=\"number\">4</span>].GPIO_READ = KEY4;\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">default</span>:\t</span><br><span class=\"line\">            <span class=\"keyword\">break</span>;</span><br><span class=\"line\">  &#125;\t\t</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"KEY-H\"><a href=\"#KEY-H\" class=\"headerlink\" title=\"KEY.H\"></a>KEY.H</h5><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">ifndef</span> __KEY_H</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> __KEY_H</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&quot;stm32f10x.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&quot;string.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&quot;SYS.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&quot;LcdControl.h&quot;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> KEY1 GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_0)</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> KEY2 GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_8)</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> KEY3 GPIO_ReadInputDataBit(GPIOB, GPIO_Pin_1)</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> KEY4 GPIO_ReadInputDataBit(GPIOB, GPIO_Pin_2)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> SHORT 1</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> LONG  2</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">struct</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\">\t<span class=\"keyword\">uint8_t</span> GPIO_READ;</span><br><span class=\"line\">\t<span class=\"keyword\">unsigned</span> <span class=\"keyword\">int</span> TIME;</span><br><span class=\"line\">\t<span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> Status;\t\t<span class=\"comment\">//短按为1，长按为2，没有按下为0</span></span><br><span class=\"line\">&#125;KeyType;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">extern</span> KeyType KEY[<span class=\"number\">5</span>];</span><br><span class=\"line\"><span class=\"keyword\">extern</span> <span class=\"built_in\">_Bool</span> KEY_FLAG;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">KEY_INIT</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">KEY_SCAN</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">KEY_Refresh</span><span class=\"params\">(u8 i)</span></span>;</span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">endif</span></span></span><br></pre></td></tr></table></figure>\n\n\n<h3 id=\"第三种：good！\"><a href=\"#第三种：good！\" class=\"headerlink\" title=\"第三种：good！\"></a>第三种：good！</h3><p>==短按+长按后某一段时间加加某数，直到松手==</p>\n<p>#####KEY.C</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&quot;KEY.h&quot;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">_Bool</span> KEY_FLAG = <span class=\"number\">0</span>;\t<span class=\"comment\">//extern到定时器中，10ms刷新一次</span></span><br><span class=\"line\">KeyType KEY[<span class=\"number\">5</span>];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">KEY_INIT</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\tGPIO_InitTypeDef GPIO_InitStructure;</span><br><span class=\"line\">  <span class=\"comment\">//使能</span></span><br><span class=\"line\">  RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA | RCC_APB2Periph_GPIOB, ENABLE);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">//设置PD2为输出模式</span></span><br><span class=\"line\">  GPIO_InitStructure.GPIO_Pin = GPIO_Pin_0 | GPIO_Pin_8;</span><br><span class=\"line\">  GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class=\"line\">  GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN_FLOATING;</span><br><span class=\"line\">  GPIO_Init(GPIOA, &amp;GPIO_InitStructure);\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">//设置PCx为输出模式</span></span><br><span class=\"line\">  GPIO_InitStructure.GPIO_Pin = GPIO_Pin_1 | GPIO_Pin_2;</span><br><span class=\"line\">  GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class=\"line\">  GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN_FLOATING;</span><br><span class=\"line\">  GPIO_Init(GPIOB, &amp;GPIO_InitStructure);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> <span class=\"title\">KEY_SCAN</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> return_num = <span class=\"number\">0</span>;\t\t\t\t<span class=\"comment\">//返回值</span></span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (KEY_FLAG)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tu8 i;\t\t\t\t\t\t\t\t\t<span class=\"comment\">//循环使用</span></span><br><span class=\"line\">\t\tKEY_FLAG = <span class=\"number\">0</span>;\t\t\t\t\t\t\t<span class=\"comment\">//滴答定时器flag\t</span></span><br><span class=\"line\">\t\t<span class=\"keyword\">for</span> (i = <span class=\"number\">1</span>; i &lt;= <span class=\"number\">4</span>; i++)</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\tKEY_Refresh(i);\t\t\t\t\t\t<span class=\"comment\">//刷新结构体中的电平状态\t\t</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (KEY[i].GPIO_READ == <span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\tKEY[i].TIME++;</span><br><span class=\"line\">\t\t\t\t<span class=\"comment\">/***********************判断长按***************************/</span></span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (KEY[i].TIME &gt; <span class=\"number\">50</span>)\t\t\t<span class=\"comment\">//长按超过0.5秒，一直返回LONG</span></span><br><span class=\"line\">\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\treturn_num = i*<span class=\"number\">2</span>;\t\t<span class=\"keyword\">return</span> return_num;</span><br><span class=\"line\">\t\t\t\t&#125;\t\t\t\t</span><br><span class=\"line\">\t\t\t&#125;\t\t</span><br><span class=\"line\">\t\t\tKEY_Refresh(i);\t\t\t\t\t\t<span class=\"comment\">//刷新电平</span></span><br><span class=\"line\">\t\t\t<span class=\"comment\">/***************************判断短按****************************/</span></span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (KEY[i].GPIO_READ == <span class=\"number\">1</span> &amp;&amp; KEY[i].TIME &gt; <span class=\"number\">0</span> &amp;&amp; KEY[i].TIME &lt; <span class=\"number\">14</span>)\t\t</span><br><span class=\"line\">\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\tKEY[i].TIME = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\t\treturn_num = i*<span class=\"number\">2</span><span class=\"number\">-1</span>;\t\t<span class=\"keyword\">return</span> return_num;\t\t\t\t\t\t</span><br><span class=\"line\">\t\t\t&#125;\t\t\t</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (KEY[i].GPIO_READ == <span class=\"number\">1</span>) \t\t\t<span class=\"comment\">//不论长按短按，松手后都会清掉计数值</span></span><br><span class=\"line\">\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\tKEY[i].TIME = <span class=\"number\">0</span>;\t</span><br><span class=\"line\">\t\t\t&#125;\t\t</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">return</span> <span class=\"number\">0</span>;\t\t\t\t\t\t\t\t<span class=\"comment\">//没有按键按下，返回0</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">KEY_Refresh</span><span class=\"params\">(u8 i)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">//刷新读取电平</span></span><br><span class=\"line\">\t<span class=\"keyword\">switch</span> (i)</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">  \t<span class=\"keyword\">case</span> <span class=\"number\">1</span>:</span><br><span class=\"line\">\t\t\tKEY[<span class=\"number\">1</span>].GPIO_READ = KEY1;\t<span class=\"keyword\">break</span>;\t</span><br><span class=\"line\">  \t<span class=\"keyword\">case</span> <span class=\"number\">2</span>:</span><br><span class=\"line\">\t\t\tKEY[<span class=\"number\">2</span>].GPIO_READ = KEY2;\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">case</span> <span class=\"number\">3</span>:</span><br><span class=\"line\">  \t\t\tKEY[<span class=\"number\">3</span>].GPIO_READ = KEY3;\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">  \t<span class=\"keyword\">case</span> <span class=\"number\">4</span>:</span><br><span class=\"line\">  \t\t\tKEY[<span class=\"number\">4</span>].GPIO_READ = KEY4;\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">default</span>:</span><br><span class=\"line\">  \t\t\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">  &#125;\t\t</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>#####KEY.H</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">ifndef</span> __KEY_H</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> __KEY_H</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&quot;stm32f10x.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&quot;string.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&quot;SYS.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&quot;LcdControl.h&quot;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> KEY1 GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_0)</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> KEY2 GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_8)</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> KEY3 GPIO_ReadInputDataBit(GPIOB, GPIO_Pin_1)</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> KEY4 GPIO_ReadInputDataBit(GPIOB, GPIO_Pin_2)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> KEY1_SHORT 1</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> KEY1_LONG  2</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> KEY2_SHORT 3</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> KEY2_LONG  4</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> KEY3_SHORT 5</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> KEY3_LONG  6</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> KEY4_SHORT 7</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> KEY4_LONG  8</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">struct</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\">\t<span class=\"keyword\">uint8_t</span> GPIO_READ;</span><br><span class=\"line\">\t<span class=\"keyword\">unsigned</span> <span class=\"keyword\">int</span> TIME;</span><br><span class=\"line\">&#125;KeyType;</span><br><span class=\"line\"><span class=\"keyword\">extern</span> KeyType KEY[<span class=\"number\">5</span>];</span><br><span class=\"line\"><span class=\"keyword\">extern</span> <span class=\"built_in\">_Bool</span> KEY_FLAG;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">KEY_INIT</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> <span class=\"title\">KEY_SCAN</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">KEY_Refresh</span><span class=\"params\">(u8 i)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">endif</span></span></span><br></pre></td></tr></table></figure>\n<h3 id=\"第四种\"><a href=\"#第四种\" class=\"headerlink\" title=\"第四种\"></a>第四种</h3><p>==把1 3写到一起==</p>\n<h3 id=\"第五种：状态机\"><a href=\"#第五种：状态机\" class=\"headerlink\" title=\"第五种：状态机\"></a>第五种：状态机</h3><p>只写了一个按键的例子</p>\n<p>#####KEY.C</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&quot;KEY.h&quot;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">KEY_INIT</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\tGPIO_InitTypeDef GPIO_InitStructure; </span><br><span class=\"line\">    RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA | RCC_APB2Periph_GPIOB, ENABLE);</span><br><span class=\"line\">\t</span><br><span class=\"line\">  \t<span class=\"comment\">//设置PD2为输出模式</span></span><br><span class=\"line\"> \t GPIO_InitStructure.GPIO_Pin = GPIO_Pin_0;</span><br><span class=\"line\">  \tGPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class=\"line\"> \t GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN_FLOATING;</span><br><span class=\"line\"> \t GPIO_Init(GPIOA, &amp;GPIO_InitStructure);\t</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> <span class=\"title\">KEY_SCAN</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">static</span> <span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> KEY_STATE = <span class=\"number\">0</span>; <span class=\"comment\">//保存按键状态，0为按下；1为释放</span></span><br><span class=\"line\">\t<span class=\"keyword\">unsigned</span> <span class=\"keyword\">int</span> TIME = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (KEY_FLAG)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tKEY_FLAG = <span class=\"number\">0</span>;\t</span><br><span class=\"line\">\t\t<span class=\"keyword\">switch</span> (KEY_STATE)</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">case</span> <span class=\"number\">0</span>:</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (KEY1 == <span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\tKEY_STATE = <span class=\"number\">1</span>; <span class=\"keyword\">break</span>;\t<span class=\"comment\">//有按键按下后退出</span></span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">case</span> <span class=\"number\">1</span>:<span class=\"comment\">//消抖</span></span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (KEY1 == <span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\tTIME++;</span><br><span class=\"line\">\t\t\t\t\tKEY_STATE = <span class=\"number\">2</span>;\t<span class=\"keyword\">break</span>; <span class=\"comment\">//10ms后进入函数，确实被按下了</span></span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">else</span> </span><br><span class=\"line\">\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\tKEY_STATE = <span class=\"number\">0</span>;\t<span class=\"keyword\">break</span>; <span class=\"comment\">//10ms后进入函数，确实被按下了</span></span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">case</span> <span class=\"number\">2</span>:</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">if</span> (KEY1 == <span class=\"number\">1</span>)\t<span class=\"comment\">//如果按键释放</span></span><br><span class=\"line\">\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">if</span> (TIME &lt;= <span class=\"number\">3</span>)</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\tKEY_STATE = <span class=\"number\">0</span>;\tTIME = <span class=\"number\">0</span>;\t<span class=\"keyword\">return</span> KEY1_SHORT;\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t\t\t\t&#125;\t\t\t\t\t</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (KEY1 == <span class=\"number\">0</span>)<span class=\"comment\">//如果没有释放</span></span><br><span class=\"line\">\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">if</span> (TIME &lt;= <span class=\"number\">20</span>)</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\tTIME++;\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t\t<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (TIME &gt; <span class=\"number\">20</span>)</span><br><span class=\"line\">\t\t\t\t\t&#123;</span><br><span class=\"line\">\t\t\t\t\t\tKEY_STATE = <span class=\"number\">2</span>;\t<span class=\"keyword\">return</span> KEY1_LONG;\t<span class=\"keyword\">break</span>;</span><br><span class=\"line\">\t\t\t\t\t&#125;</span><br><span class=\"line\">\t\t\t\t&#125;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;\t\t</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>#####KEY.C</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">ifndef</span> __KEY_H</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> __KEY_H</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&quot;stm32f10x.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&quot;string.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&quot;SYS.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&quot;LcdControl.h&quot;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> KEY1 GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_0)</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> KEY1_SHORT 1</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> KEY1_LONG  2</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">KEY_INIT</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> <span class=\"title\">KEY3_SCAN</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">endif</span></span></span><br></pre></td></tr></table></figure>\n<p>###第四种：惟惟的</p>\n<h5 id=\"KEY-C\"><a href=\"#KEY-C\" class=\"headerlink\" title=\"KEY.C\"></a>KEY.C</h5><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&quot;Key.h&quot;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">Key_Init</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\tGPIO_InitTypeDef GPIO_InitStructure;</span><br><span class=\"line\">\tTIM_TimeBaseInitTypeDef  TIM_TimeBaseStructure;</span><br><span class=\"line\">\tNVIC_InitTypeDef NVIC_InitStructure;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">/* GPIOB &amp; GPIOA Periph clock enable */</span></span><br><span class=\"line\">\tRCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA, ENABLE);</span><br><span class=\"line\">\tRCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOB, ENABLE);</span><br><span class=\"line\">\t<span class=\"comment\">/* TIM4 clock enable */</span></span><br><span class=\"line\">  RCC_APB1PeriphClockCmd(RCC_APB1Periph_TIM4, ENABLE);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">/* Configure PA0-8 in GPIO_Mode_IN_FLOATING mode */</span></span><br><span class=\"line\">  GPIO_InitStructure.GPIO_Pin = GPIO_Pin_0 | GPIO_Pin_8;</span><br><span class=\"line\">  GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class=\"line\">  GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN_FLOATING;</span><br><span class=\"line\">  GPIO_Init(GPIOA, &amp;GPIO_InitStructure);</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t<span class=\"comment\">/* Configure PB1-2 in GPIO_Mode_IN_FLOATING mode */</span></span><br><span class=\"line\">  GPIO_InitStructure.GPIO_Pin = GPIO_Pin_1 | GPIO_Pin_2;</span><br><span class=\"line\">  GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class=\"line\">  GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN_FLOATING;</span><br><span class=\"line\">  GPIO_Init(GPIOB, &amp;GPIO_InitStructure);</span><br><span class=\"line\">\t</span><br><span class=\"line\">  <span class=\"comment\">/* Time base configuration */</span></span><br><span class=\"line\">  TIM_TimeBaseStructure.TIM_Period = <span class=\"number\">1000</span> - <span class=\"number\">1</span>;</span><br><span class=\"line\">  TIM_TimeBaseStructure.TIM_Prescaler = <span class=\"number\">72</span> - <span class=\"number\">1</span>;</span><br><span class=\"line\">  TIM_TimeBaseStructure.TIM_ClockDivision = <span class=\"number\">0</span>;</span><br><span class=\"line\">  TIM_TimeBaseStructure.TIM_CounterMode = TIM_CounterMode_Up;</span><br><span class=\"line\">  TIM_TimeBaseInit(TIM4, &amp;TIM_TimeBaseStructure);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">/* Enable the TIM4 global Interrupt */</span></span><br><span class=\"line\">  NVIC_InitStructure.NVIC_IRQChannel = TIM4_IRQn;</span><br><span class=\"line\">  NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = <span class=\"number\">0</span>;</span><br><span class=\"line\">  NVIC_InitStructure.NVIC_IRQChannelSubPriority = <span class=\"number\">1</span>;</span><br><span class=\"line\">  NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;</span><br><span class=\"line\">  NVIC_Init(&amp;NVIC_InitStructure);</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">/* TIM IT enable */</span></span><br><span class=\"line\">  TIM_ITConfig(TIM4, TIM_IT_Update, ENABLE);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/* TIM4 enable counter */</span></span><br><span class=\"line\">  TIM_Cmd(TIM4, ENABLE);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">_KeyType Key_Status[<span class=\"number\">4</span>];</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * @brief  This function handles TIM4 global interrupt request.</span></span><br><span class=\"line\"><span class=\"comment\">  * @param  None</span></span><br><span class=\"line\"><span class=\"comment\">  * @retval None</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">TIM4_IRQHandler</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (TIM_GetITStatus(TIM4, TIM_IT_Update) != RESET)</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    TIM_ClearITPendingBit(TIM4, TIM_IT_Update);</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_0) == <span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\tKey_Status[<span class=\"number\">0</span>].Status = <span class=\"number\">1</span>;</span><br><span class=\"line\">\t\t\tKey_Status[<span class=\"number\">0</span>].uiValue++;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">else</span></span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (Key_Status[<span class=\"number\">0</span>].uiValue &lt; <span class=\"number\">100</span>)\t\t\t</span><br><span class=\"line\">\t\t\t\tKey_Status[<span class=\"number\">0</span>].uiValue = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\tKey_Status[<span class=\"number\">0</span>].Status = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (GPIO_ReadInputDataBit(GPIOA, GPIO_Pin_8) == <span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\tKey_Status[<span class=\"number\">1</span>].Status = <span class=\"number\">1</span>;</span><br><span class=\"line\">\t\t\tKey_Status[<span class=\"number\">1</span>].uiValue++;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">else</span></span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (Key_Status[<span class=\"number\">1</span>].uiValue &lt; <span class=\"number\">100</span>)\t\t\t</span><br><span class=\"line\">\t\t\t\tKey_Status[<span class=\"number\">1</span>].uiValue = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\tKey_Status[<span class=\"number\">1</span>].Status = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (GPIO_ReadInputDataBit(GPIOB, GPIO_Pin_1) == <span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\tKey_Status[<span class=\"number\">2</span>].Status = <span class=\"number\">1</span>;</span><br><span class=\"line\">\t\t\tKey_Status[<span class=\"number\">2</span>].uiValue++;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">else</span></span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (Key_Status[<span class=\"number\">2</span>].uiValue &lt; <span class=\"number\">100</span>)\t\t\t</span><br><span class=\"line\">\t\t\t\tKey_Status[<span class=\"number\">2</span>].uiValue = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\tKey_Status[<span class=\"number\">2</span>].Status = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t</span><br><span class=\"line\">\t\t<span class=\"keyword\">if</span> (GPIO_ReadInputDataBit(GPIOB, GPIO_Pin_2) == <span class=\"number\">0</span>)</span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\tKey_Status[<span class=\"number\">3</span>].Status = <span class=\"number\">1</span>;</span><br><span class=\"line\">\t\t\tKey_Status[<span class=\"number\">3</span>].uiValue++;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t\t<span class=\"keyword\">else</span></span><br><span class=\"line\">\t\t&#123;</span><br><span class=\"line\">\t\t\t<span class=\"keyword\">if</span> (Key_Status[<span class=\"number\">3</span>].uiValue &lt; <span class=\"number\">100</span>)\t\t\t</span><br><span class=\"line\">\t\t\t\tKey_Status[<span class=\"number\">3</span>].uiValue = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t\tKey_Status[<span class=\"number\">3</span>].Status = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t&#125;</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n<h5 id=\"KEY-H-1\"><a href=\"#KEY-H-1\" class=\"headerlink\" title=\"KEY.H\"></a>KEY.H</h5><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">ifndef</span>\t__KEY_H</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> __KEY_H</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&quot;Sys.h&quot;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">typedef</span> <span class=\"class\"><span class=\"keyword\">struct</span></span></span><br><span class=\"line\"><span class=\"class\">&#123;</span></span><br><span class=\"line\">\t<span class=\"built_in\">_Bool</span> Status;</span><br><span class=\"line\">\t<span class=\"keyword\">unsigned</span> <span class=\"keyword\">int</span> uiValue;</span><br><span class=\"line\">&#125;_KeyType;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">extern</span> _KeyType Key_Status[<span class=\"number\">4</span>];</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">Key_Init</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span>;</span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">endif</span></span></span><br></pre></td></tr></table></figure>\n\n\n\n\n<h1 id=\"LCD\"><a href=\"#LCD\" class=\"headerlink\" title=\"LCD\"></a>LCD</h1><h2 id=\"Lcd-Control-c\"><a href=\"#Lcd-Control-c\" class=\"headerlink\" title=\"Lcd_Control.c\"></a>Lcd_Control.c</h2><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&quot;LcdControl.h&quot;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">LCD_INIT</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;\t\t\t\t\t\t\t\t<span class=\"comment\">//这三句是lcd.h中最上边的三句</span></span><br><span class=\"line\">\tSTM3210B_LCD_Init();\t\t<span class=\"comment\">//硬件初始化</span></span><br><span class=\"line\">\tLCD_SetBackColor(Black);\t<span class=\"comment\">//背景颜色</span></span><br><span class=\"line\">\tLCD_SetTextColor(White);\t<span class=\"comment\">//文字颜色</span></span><br><span class=\"line\">\tLCD_Clear(Black);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">\t</span><br><span class=\"line\"><span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> LCD_SHOW[<span class=\"number\">30</span>];</span><br><span class=\"line\"><span class=\"built_in\">_Bool</span> LCD_FLAG = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">LCD_PRO</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (LCD_FLAG)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\tLCD_FLAG = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t\t<span class=\"built_in\">sprintf</span>((<span class=\"keyword\">char</span> *)LCD_SHOW, <span class=\"string\">&quot;LCD:  123&quot;</span>);</span><br><span class=\"line\">\t\tLCD_DisplayStringLine(Line0, LCD_SHOW);</span><br><span class=\"line\">\t\tLCD_DisplayStringLine(Line1, LCD_SHOW);</span><br><span class=\"line\">\t\tLCD_DisplayStringLine(Line2, LCD_SHOW);\t</span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>##Lcd_Control.h</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">ifndef</span> __LCDCONTROL_H</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> __LCDCONTROL_H</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&quot;stm32f10x.h&quot;</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&quot;SYS.h&quot;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">LCD_INIT</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span>;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">LCD_PRO</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span>;</span><br><span class=\"line\"><span class=\"keyword\">extern</span> <span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> LCD_SHOW[<span class=\"number\">3000</span>];</span><br><span class=\"line\"><span class=\"keyword\">extern</span> <span class=\"keyword\">unsigned</span> <span class=\"keyword\">char</span> num;</span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">endif</span></span></span><br></pre></td></tr></table></figure>\n\n\n\n\n<h2 id=\"注意\"><a href=\"#注意\" class=\"headerlink\" title=\"注意\"></a>注意</h2><ol>\n<li>因为要使用sprintf，故引入stdio.h</li>\n<li>定义数组</li>\n</ol>\n<p>#USART</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&quot;USART.h&quot;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">USART2_INIT</span><span class=\"params\">(<span class=\"keyword\">unsigned</span> <span class=\"keyword\">int</span> BOTELV)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">/*定义结构体*/</span></span><br><span class=\"line\">\tUSART_InitTypeDef USART_InitStructure;</span><br><span class=\"line\">  GPIO_InitTypeDef GPIO_InitStructure;</span><br><span class=\"line\">  NVIC_InitTypeDef NVIC_InitStructure;</span><br><span class=\"line\"></span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">/*开启时钟*/</span></span><br><span class=\"line\">  RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA | RCC_APB2Periph_AFIO, ENABLE);\t</span><br><span class=\"line\">  RCC_APB1PeriphClockCmd(RCC_APB1Periph_USART2, ENABLE); </span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">/*USART初始化*/</span></span><br><span class=\"line\">  USART_InitStructure.USART_BaudRate = BOTELV;</span><br><span class=\"line\">  USART_InitStructure.USART_WordLength = USART_WordLength_8b;</span><br><span class=\"line\">  USART_InitStructure.USART_StopBits = USART_StopBits_1;</span><br><span class=\"line\">  USART_InitStructure.USART_Parity = USART_Parity_No;</span><br><span class=\"line\">  USART_InitStructure.USART_HardwareFlowControl = USART_HardwareFlowControl_None;</span><br><span class=\"line\">  USART_InitStructure.USART_Mode = USART_Mode_Rx | USART_Mode_Tx; </span><br><span class=\"line\">  USART_Init(USART2, &amp;USART_InitStructure);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">/*GPIO初始化*/</span></span><br><span class=\"line\">  <span class=\"comment\">/* Configure USARTy Rx as input floating */</span></span><br><span class=\"line\">  GPIO_InitStructure.GPIO_Pin = GPIO_Pin_3;</span><br><span class=\"line\">  GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN_FLOATING;</span><br><span class=\"line\">  GPIO_Init(GPIOA, &amp;GPIO_InitStructure);\t</span><br><span class=\"line\">\t</span><br><span class=\"line\">  <span class=\"comment\">/* Configure USARTy Tx as alternate function push-pull */</span></span><br><span class=\"line\">  GPIO_InitStructure.GPIO_Pin = GPIO_Pin_2;</span><br><span class=\"line\">  GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;</span><br><span class=\"line\">  GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_PP;</span><br><span class=\"line\">  GPIO_Init(GPIOA, &amp;GPIO_InitStructure);\t</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">/*NVIC*/</span></span><br><span class=\"line\">  NVIC_InitStructure.NVIC_IRQChannel = USART2_IRQn;</span><br><span class=\"line\">  NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = <span class=\"number\">0</span>;</span><br><span class=\"line\">  NVIC_InitStructure.NVIC_IRQChannelSubPriority = <span class=\"number\">0</span>;</span><br><span class=\"line\">  NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;</span><br><span class=\"line\">  NVIC_Init(&amp;NVIC_InitStructure);</span><br><span class=\"line\"></span><br><span class=\"line\">\t<span class=\"comment\">/*使能*/</span></span><br><span class=\"line\">  USART_Cmd(USART2, ENABLE);<span class=\"comment\">//串口使能</span></span><br><span class=\"line\">  USART_ITConfig(USART2, USART_IT_RXNE, ENABLE);<span class=\"comment\">//中断使能</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">fputc</span><span class=\"params\">(<span class=\"keyword\">int</span> ch, FILE *f)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">while</span> (USART_GetFlagStatus(USART2, USART_FLAG_TXE) == RESET)</span><br><span class=\"line\">  &#123;&#125;</span><br><span class=\"line\">  USART_SendData(USART2, (<span class=\"keyword\">uint8_t</span>) ch);</span><br><span class=\"line\">  <span class=\"keyword\">return</span> ch;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">uint8_t</span> RxCounter = <span class=\"number\">0</span>;</span><br><span class=\"line\"><span class=\"keyword\">uint8_t</span> RxBuffer2[<span class=\"number\">5</span>];</span><br><span class=\"line\"><span class=\"keyword\">uint8_t</span> NbrOfDataToRead;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">USART2_IRQHandler</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span>(USART_GetITStatus(USART2, USART_IT_RXNE) != RESET)</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"comment\">/* Read one byte from the receive data register */</span></span><br><span class=\"line\">    RxBuffer2[RxCounter++] = USART_ReceiveData(USART2);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span>(RxCounter == NbrOfDataToRead)</span><br><span class=\"line\">    &#123;</span><br><span class=\"line\">      <span class=\"comment\">/* Disable the USART2 Receive interrupt */</span></span><br><span class=\"line\">      USART_ITConfig(USART2, USART_IT_RXNE, DISABLE);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n\n<h1 id=\"TIME\"><a href=\"#TIME\" class=\"headerlink\" title=\"TIME\"></a>TIME</h1><h2 id=\"PWM\"><a href=\"#PWM\" class=\"headerlink\" title=\"PWM\"></a>PWM</h2><h5 id=\"PWM-C\"><a href=\"#PWM-C\" class=\"headerlink\" title=\"PWM.C\"></a>PWM.C</h5><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&quot;TIME.h&quot;</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">TIME2_CH2_PWM_Init</span><span class=\"params\">(<span class=\"keyword\">unsigned</span> <span class=\"keyword\">int</span> ARR, <span class=\"keyword\">unsigned</span> <span class=\"keyword\">int</span> PSC)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"comment\">/*定义三种结构体*/</span></span><br><span class=\"line\">    TIM_TimeBaseInitTypeDef  TIM_TimeBaseStructure;</span><br><span class=\"line\">\tTIM_OCInitTypeDef  TIM_OCInitStructure;</span><br><span class=\"line\">    GPIO_InitTypeDef GPIO_InitStructure;</span><br><span class=\"line\">\t</span><br><span class=\"line\">\t<span class=\"comment\">/*设置时钟*/</span></span><br><span class=\"line\">    RCC_APB1PeriphClockCmd(RCC_APB1Periph_TIM2, ENABLE);<span class=\"comment\">//开启TIM2时钟</span></span><br><span class=\"line\">    RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA | RCC_APB2Periph_AFIO, ENABLE);</span><br><span class=\"line\">    \t\t\t\t\t\t\t\t\t\t\t\t<span class=\"comment\">//开启定时器相关IO口时钟，开启复用</span></span><br><span class=\"line\">\t<span class=\"comment\">/*初始化IO  CH2--PA1*/</span> \t</span><br><span class=\"line\">    GPIO_InitStructure.GPIO_Pin =  GPIO_Pin_1;\t</span><br><span class=\"line\">    GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_PP;\t</span><br><span class=\"line\">    GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;\t</span><br><span class=\"line\">    GPIO_Init(GPIOA, &amp;GPIO_InitStructure);\t\t</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/*TIM2初始化设置*/</span> </span><br><span class=\"line\">    TIM_TimeBaseStructure.TIM_Period = ARR - <span class=\"number\">1</span>;\t\t\t\t<span class=\"comment\">//设置自动重装载值</span></span><br><span class=\"line\">    TIM_TimeBaseStructure.TIM_Prescaler = PSC - <span class=\"number\">1</span>;  \t\t<span class=\"comment\">//设置预分频系数</span></span><br><span class=\"line\">    TIM_TimeBaseStructure.TIM_ClockDivision = <span class=\"number\">0</span>;\t\t<span class=\"comment\">//设置时钟分频因子</span></span><br><span class=\"line\">    TIM_TimeBaseStructure.TIM_CounterMode = TIM_CounterMode_Up;<span class=\"comment\">//向上计数模式</span></span><br><span class=\"line\">    TIM_TimeBaseInit(TIM2, &amp;TIM_TimeBaseStructure);</span><br><span class=\"line\">\t </span><br><span class=\"line\">    <span class=\"comment\">/*TIM2-CH2模式设置*/</span> </span><br><span class=\"line\">    TIM_OCInitStructure.TIM_OCMode = TIM_OCMode_PWM1;<span class=\"comment\">//设置模式为PWM1,CON&lt;CRR输出有效点平 </span></span><br><span class=\"line\">    TIM_OCInitStructure.TIM_OutputState = TIM_OutputState_Enable;<span class=\"comment\">//输出使能，开启定时器的外部输出  </span></span><br><span class=\"line\">    TIM_OCInitStructure.TIM_OCPolarity = TIM_OCPolarity_High;  <span class=\"comment\">//设置极性：有效点平为高电平</span></span><br><span class=\"line\">    TIM_OC2Init(TIM2, &amp;TIM_OCInitStructure); </span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\">/*使能*/</span>      </span><br><span class=\"line\">    TIM_ARRPreloadConfig(TIM2, ENABLE);\t\t\t\t\t<span class=\"comment\">//使能影子寄存器</span></span><br><span class=\"line\">    TIM_Cmd(TIM2, ENABLE);\t\t\t\t\t\t\t\t<span class=\"comment\">//使能TIM2</span></span><br><span class=\"line\">    TIM_OC2PreloadConfig(TIM2, TIM_OCPreload_Enable);\t<span class=\"comment\">//使能预装载寄存器</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h5 id=\"MAIN-C\"><a href=\"#MAIN-C\" class=\"headerlink\" title=\"MAIN.C\"></a>MAIN.C</h5><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">TIM_SetCompare2(TIM2, <span class=\"number\">500</span>);\t\t<span class=\"comment\">//修改占空比</span></span><br><span class=\"line\">TIM_SetAutoreload(TIM2, <span class=\"number\">2000</span>);\t<span class=\"comment\">//修改频率</span></span><br></pre></td></tr></table></figure>\n\n\n\n\n","tags":[{"name":"蓝桥杯","slug":"蓝桥杯","permalink":"https://xiangheyuhai.github.io/tags/%E8%93%9D%E6%A1%A5%E6%9D%AF/"}]},{"title":"欢迎来到樊的博客","date":"2021-02-18T14:55:46.000Z","path":"2021/02/18/欢迎来到樊的博客/","content":"<h1 id=\"像河与海\"><a href=\"#像河与海\" class=\"headerlink\" title=\"像河与海\"></a>像河与海</h1><h2 id=\"欢迎来到樊的博客\"><a href=\"#欢迎来到樊的博客\" class=\"headerlink\" title=\"欢迎来到樊的博客\"></a>欢迎来到樊的博客</h2><h2 id=\"十年饮冰，难凉热血\"><a href=\"#十年饮冰，难凉热血\" class=\"headerlink\" title=\"十年饮冰，难凉热血\"></a>十年饮冰，难凉热血</h2><a id=\"more\"></a>","tags":[{"name":"大家好，我是像河与海！","slug":"大家好，我是像河与海！","permalink":"https://xiangheyuhai.github.io/tags/%E5%A4%A7%E5%AE%B6%E5%A5%BD%EF%BC%8C%E6%88%91%E6%98%AF%E5%83%8F%E6%B2%B3%E4%B8%8E%E6%B5%B7%EF%BC%81/"}]},{"title":"Share_Xmind安装在指定文件夹","date":"2021-02-15T14:55:46.000Z","path":"2021/02/15/Share_Xmind安装在指定文件夹/","content":"<h1 id=\"问题描述\"><a href=\"#问题描述\" class=\"headerlink\" title=\"问题描述\"></a>问题描述</h1><p>XMind安装时默认安装在C盘，为了给C盘释放压力，将XMind安装在指定文件夹</p>\n<h1 id=\"操作步骤\"><a href=\"#操作步骤\" class=\"headerlink\" title=\"操作步骤\"></a>操作步骤</h1><ol>\n<li><p> win+r，输入“regedit”打开注册表编辑器</p>\n</li>\n<li><p>找到如图所给的路径</p>\n<p><code>\\HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion</code></p>\n<a id=\"more\"></a>\n\n</li>\n</ol>\n<p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210203114101898.png\"></p>\n<ol start=\"3\">\n<li><p>双击修改“ProgramFilesDir”这个配置项。这里我修改的路径为<code>D\\SoftWare</code>。你可以自定义一个路径</p>\n<p>==重要：修改前先把原数值记录下来，方便之后修改回去==</p>\n</li>\n</ol>\n<p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210203110457796.png\" alt=\"image-20210203110457796\"></p>\n<p>​                修改完成</p>\n<p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210203110541514.png\" alt=\"image-20210203110541514\"></p>\n<ol start=\"4\">\n<li>安装XMind，安装完成之后右键桌面快捷方式找到文件安装路径，如图即安装成功。</li>\n</ol>\n<p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210203110628672.png\" alt=\"image-20210203110628672\"></p>\n<ol start=\"5\">\n<li>==重要：将“ProgramFilesDir”这个配置项。修改为原始的数据值==</li>\n</ol>\n<p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210203110755858.png\" alt=\"image-20210203110755858\"></p>\n<p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210203110835184.png\" alt=\"image-20210203110835184\"></p>\n<p>安装完成</p>\n<h1 id=\"本文仅是做一个记录并分享出来。如有错误请指正，如有更好的方法望分享\"><a href=\"#本文仅是做一个记录并分享出来。如有错误请指正，如有更好的方法望分享\" class=\"headerlink\" title=\"本文仅是做一个记录并分享出来。如有错误请指正，如有更好的方法望分享\"></a>本文仅是做一个记录并分享出来。如有错误请指正，如有更好的方法望分享</h1>","tags":[{"name":"Xmind","slug":"Xmind","permalink":"https://xiangheyuhai.github.io/tags/Xmind/"}]},{"title":"学习笔记_Java","date":"2021-02-15T14:55:46.000Z","path":"2021/02/15/学习笔记_Java/","content":"<h1 id=\"windows快捷键\"><a href=\"#windows快捷键\" class=\"headerlink\" title=\"windows快捷键\"></a>windows快捷键</h1><p>Alt + F4    关闭</p>\n<p>Shift + DEL    永久删除</p>\n<p>WIN + E    打开我的电脑</p>\n<p>Ctrl + Shift  + ESC    打开任务管理器</p>\n<h1 id=\"dos命令\"><a href=\"#dos命令\" class=\"headerlink\" title=\"dos命令\"></a>dos命令</h1><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">D:\t\t\t盘符切换</span><br><span class=\"line\">dir\t\t\t查看当前目录下的所有文件</span><br><span class=\"line\">cd\t\t\t切换目录（change directory）    </span><br><span class=\"line\">cd ..\t\t返回上一级</span><br><span class=\"line\">cd /d C:\t\t进入C盘</span><br><span class=\"line\">cd /d D:\\C++\t进入D盘中C++文件夹</span><br><span class=\"line\">cls\t\t\t清屏（clean screen）</span><br><span class=\"line\">ipconfig\t查看IP地址</span><br><span class=\"line\">    <span class=\"comment\">/*打开应用*/</span></span><br><span class=\"line\">calc\t\t打开计算器</span><br><span class=\"line\">mspaint\t\t打开画图工具</span><br><span class=\"line\">notepad\t\t新建记事本 </span><br><span class=\"line\">    <span class=\"comment\">/*文件夹*/</span></span><br><span class=\"line\">mk 目录名\t\t新建文件夹</span><br><span class=\"line\">rd 目录名    \t删除文件夹</span><br></pre></td></tr></table></figure>\n\n\n<h1 id=\"Java三大版本\"><a href=\"#Java三大版本\" class=\"headerlink\" title=\"Java三大版本\"></a>Java三大版本</h1><ul>\n<li>Write Once，Run Anywhere</li>\n<li>JavaSE    标准版（桌面程序，控制台开发）</li>\n<li>JavaME  淘汰</li>\n<li>JavaEE    企业级开发（web端 服务器开发）</li>\n</ul>\n<a id=\"more\"></a>\n\n<h1 id=\"JDK-JRE-JVM\"><a href=\"#JDK-JRE-JVM\" class=\"headerlink\" title=\"JDK  JRE  JVM\"></a>JDK  JRE  JVM</h1><p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210312210012917.png\" alt=\"image-20210312210012917\"></p>\n<p>JDK  开发者工具</p>\n<p>JRE  运行环境</p>\n<p>JVM  虚拟环境</p>\n<h1 id=\"卸载方法\"><a href=\"#卸载方法\" class=\"headerlink\" title=\"卸载方法\"></a>卸载方法</h1><p>p17</p>\n","tags":[{"name":"Java","slug":"Java","permalink":"https://xiangheyuhai.github.io/tags/Java/"}]},{"title":"学习笔记_Linux","date":"2021-02-15T14:55:46.000Z","path":"2021/02/15/学习笔记_Linux/","content":"<h1 id=\"Xshell-Xfpt\"><a href=\"#Xshell-Xfpt\" class=\"headerlink\" title=\"Xshell Xfpt\"></a>Xshell Xfpt</h1><p>连接系统</p>\n<p>上传文件</p>\n<h1 id=\"走进Linux\"><a href=\"#走进Linux\" class=\"headerlink\" title=\"走进Linux\"></a>走进Linux</h1><blockquote>\n<p>开机登录</p>\n</blockquote>\n<p>开机有许多程序，Windows中叫“服务（service）”,Linux中叫“守护进程（dramon）”</p>\n<a id=\"more\"></a>\n\n<h1 id=\"常用命令\"><a href=\"#常用命令\" class=\"headerlink\" title=\"常用命令\"></a>常用命令</h1><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\t<span class=\"comment\">/*基操*/</span></span><br><span class=\"line\">cd</span><br><span class=\"line\">cd  \t改变目录</span><br><span class=\"line\">cd ..\t回退到上一个目录；   “..”代表上一级目录</span><br><span class=\"line\">pwd\t\t显示当前所在的目录路径</span><br><span class=\"line\">ls\t\t列出当前目录中的所有文件</span><br><span class=\"line\">reset\t\t重新初始化终端/清屏</span><br><span class=\"line\">clear\t\t清屏</span><br><span class=\"line\">history\t\t查看命令历史</span><br><span class=\"line\">help\t\t帮助</span><br><span class=\"line\"><span class=\"built_in\">exit</span> \t\t退出  </span><br><span class=\"line\">    <span class=\"comment\">/*关机*/</span></span><br><span class=\"line\">shutdown\t关机</span><br><span class=\"line\">sync\t\t将数据由内存同步到硬盘中</span><br><span class=\"line\">shutdown -h <span class=\"number\">10</span>\t\t<span class=\"number\">10</span>分钟或关机</span><br><span class=\"line\">shutdown -h now\t\t立刻关机</span><br><span class=\"line\">shutdown       </span><br><span class=\"line\">shutdown\t关机    </span><br><span class=\"line\">shutdown\t关机    </span><br><span class=\"line\">shutdown\t关机    </span><br><span class=\"line\">    <span class=\"comment\">/*文件夹 文件操作*/</span></span><br><span class=\"line\">touch \t新建一个文件</span><br><span class=\"line\">rm\t\t删除一个文件</span><br><span class=\"line\">mkdir\t新建一个文件夹</span><br><span class=\"line\">rm -r\t删除一个文件夹        </span><br><span class=\"line\">    `rm -rf` 切勿在linux中尝试</span><br><span class=\"line\">mv\t\t移动文件    </span><br><span class=\"line\">    比如：mv fjx.c fjx   指的是把fjx.v移动到fjx文件夹中</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n","tags":[{"name":"Linux","slug":"Linux","permalink":"https://xiangheyuhai.github.io/tags/Linux/"}]},{"title":"学习笔记_HAL库基操","date":"2021-02-08T14:55:46.000Z","path":"2021/02/08/学习笔记_HAL库基操/","content":"<h1 id=\"1-USART\"><a href=\"#1-USART\" class=\"headerlink\" title=\"1. USART\"></a>1. USART</h1><p>##1.1 printf重定义</p>\n<h4 id=\"第一种\"><a href=\"#第一种\" class=\"headerlink\" title=\"第一种\"></a>第一种</h4><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;stdio.h&gt;//在头引入</span></span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**************************************printf重定义**************************************/</span></span><br><span class=\"line\"><span class=\"keyword\">int</span> __io_putchar(<span class=\"keyword\">int</span> ch)<span class=\"comment\">//在 USER CODE BEGIN 0 添加</span></span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\tHAL_UART_Transmit(&amp;huart1 , (<span class=\"keyword\">uint8_t</span> *)&amp;ch, <span class=\"number\">1</span>, <span class=\"number\">0xFFFF</span>);</span><br><span class=\"line\">\t<span class=\"keyword\">return</span> ch;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h4 id=\"第二种\"><a href=\"#第二种\" class=\"headerlink\" title=\"第二种\"></a>第二种</h4><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* Private function prototypes -----------------------------------------------*/</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">ifdef</span> __GNUC__</span></span><br><span class=\"line\"><span class=\"comment\">/* With GCC, small printf (option LD Linker-&gt;Libraries-&gt;Small printf</span></span><br><span class=\"line\"><span class=\"comment\">   set to &#x27;Yes&#x27;) calls __io_putchar() */</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> PUTCHAR_PROTOTYPE int __io_putchar(int ch)</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">else</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> PUTCHAR_PROTOTYPE int fputc(int ch, FILE *f)</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">endif</span> <span class=\"comment\">/* __GNUC__ */</span></span></span><br><span class=\"line\"><span class=\"comment\">/* Private functions -------------------------------------------------</span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\"></span></span><br><span class=\"line\"><span class=\"comment\">/* USER CODE BEGIN 0 */</span> </span><br><span class=\"line\">PUTCHAR_PROTOTYPE</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">    HAL_UART_Transmit(&amp;huart1 , (<span class=\"keyword\">uint8_t</span> *)&amp;ch, <span class=\"number\">1</span>, <span class=\"number\">0xFFFF</span>);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> ch;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* USER CODE END 0 */</span></span><br></pre></td></tr></table></figure>\n<a id=\"more\"></a>\n\n<h2 id=\"1-2-条件编译-格式化代码\"><a href=\"#1-2-条件编译-格式化代码\" class=\"headerlink\" title=\"1.2 条件编译+格式化代码\"></a>1.2 条件编译+格式化代码</h2><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*********************************代码格式化+实现条件编译效果*********************************/</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> USER_MAIN_DEBUG  <span class=\"comment\">//若定义，输出双引号的内容后自动添加\\r\\n</span></span></span><br><span class=\"line\">\t\t\t\t\t\t <span class=\"comment\">//若未定义，不输出内容</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">ifdef</span> USER_MAIN_DEBUG</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> user_main_printf(format, ...) printf( format <span class=\"meta-string\">&quot;\\r\\n&quot;</span>, ##__VA_ARGS__)</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> user_main_info(format, ...) printf(<span class=\"meta-string\">&quot;[\\tmain]info:&quot;</span> format <span class=\"meta-string\">&quot;\\r\\n&quot;</span>, ##__VA_ARGS__)</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> user_main_debug(format, ...) printf(<span class=\"meta-string\">&quot;[\\tmain]debug:&quot;</span> format <span class=\"meta-string\">&quot;\\r\\n&quot;</span>, ##__VA_ARGS__)</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> user_main_error(format, ...) printf(<span class=\"meta-string\">&quot;[\\tmain]error:&quot;</span> format <span class=\"meta-string\">&quot;\\r\\n&quot;</span>,##__VA_ARGS__)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">else</span></span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> user_main_printf(format, ...)</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> user_main_info(format, ...)</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> user_main_debug(format, ...)</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">define</span> user_main_error(format, ...)</span></span><br><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">endif</span></span></span><br></pre></td></tr></table></figure>\n<h2 id=\"1-3-逻辑代码\"><a href=\"#1-3-逻辑代码\" class=\"headerlink\" title=\"1.3 逻辑代码\"></a>1.3 逻辑代码</h2><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//发送数据</span></span><br><span class=\"line\"><span class=\"function\">HAL_StatusTypeDef <span class=\"title\">HAL_UART_Transmit</span><span class=\"params\">(UART_HandleTypeDef *huart, <span class=\"keyword\">uint8_t</span> *pData,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\"><span class=\"keyword\">uint16_t</span> Size, <span class=\"keyword\">uint32_t</span> Timeout)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">//接收数据</span></span><br><span class=\"line\"><span class=\"function\">HAL_StatusTypeDef <span class=\"title\">HAL_UART_Receive</span><span class=\"params\">(UART_HandleTypeDef *huart, <span class=\"keyword\">uint8_t</span> *pData,</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\"><span class=\"keyword\">uint16_t</span> Size, <span class=\"keyword\">uint32_t</span> Timeout)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">//发送中断</span></span><br><span class=\"line\"><span class=\"function\">HAL_StatusTypeDef <span class=\"title\">HAL_UART_Transmit_IT</span><span class=\"params\">(UART_HandleTypeDef *huart, <span class=\"keyword\">uint8_t</span> *</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">pData, <span class=\"keyword\">uint16_t</span> Size)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">//接收中断</span></span><br><span class=\"line\"><span class=\"function\">HAL_StatusTypeDef <span class=\"title\">HAL_UART_Receive_IT</span><span class=\"params\">(UART_HandleTypeDef *huart, <span class=\"keyword\">uint8_t</span> *pData</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">, <span class=\"keyword\">uint16_t</span> Size)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">//使用DMA发送</span></span><br><span class=\"line\"><span class=\"function\">HAL_StatusTypeDef <span class=\"title\">HAL_UART_Transmit_DMA</span><span class=\"params\">(UART_HandleTypeDef *huart, <span class=\"keyword\">uint8_t</span> *</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">pData, <span class=\"keyword\">uint16_t</span> Size)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">//使用DMA接收</span></span><br><span class=\"line\"><span class=\"function\">HAL_StatusTypeDef <span class=\"title\">HAL_UART_Receive_DMA</span><span class=\"params\">(UART_HandleTypeDef *huart, <span class=\"keyword\">uint8_t</span> *</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"params\">pData, <span class=\"keyword\">uint16_t</span> Size)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">//DMA暂停</span></span><br><span class=\"line\"><span class=\"function\">HAL_StatusTypeDef <span class=\"title\">HAL_UART_DMAPause</span><span class=\"params\">(UART_HandleTypeDef *huart)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">//DMA恢复</span></span><br><span class=\"line\"><span class=\"function\">HAL_StatusTypeDef <span class=\"title\">HAL_UART_DMAResume</span><span class=\"params\">(UART_HandleTypeDef *huart)</span></span>;</span><br><span class=\"line\"><span class=\"comment\">//DMA停止</span></span><br><span class=\"line\"><span class=\"function\">HAL_StatusTypeDef <span class=\"title\">HAL_UART_DMAStop</span><span class=\"params\">(UART_HandleTypeDef *huart)</span></span>;</span><br></pre></td></tr></table></figure>\n\n\n<h1 id=\"2-PWM\"><a href=\"#2-PWM\" class=\"headerlink\" title=\"2. PWM\"></a>2. PWM</h1><h2 id=\"2-1-时钟树配置\"><a href=\"#2-1-时钟树配置\" class=\"headerlink\" title=\"2.1 时钟树配置\"></a>2.1 时钟树配置</h2><h3 id=\"2-1-1-使能外部时钟源\"><a href=\"#2-1-1-使能外部时钟源\" class=\"headerlink\" title=\"2.1.1 使能外部时钟源\"></a>2.1.1 使能外部时钟源</h3><p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210219194625012.png\" alt=\"image-20210219194625012\"></p>\n<h3 id=\"2-1-2-将频率调至最大\"><a href=\"#2-1-2-将频率调至最大\" class=\"headerlink\" title=\"2.1.2 将频率调至最大\"></a>2.1.2 将频率调至最大</h3><p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210219194738128.png\" alt=\"image-20210219194738128\"></p>\n<h2 id=\"2-2-PWM配置\"><a href=\"#2-2-PWM配置\" class=\"headerlink\" title=\"2.2 PWM配置\"></a>2.2 PWM配置</h2><h3 id=\"2-2-1-使能PWM通道\"><a href=\"#2-2-1-使能PWM通道\" class=\"headerlink\" title=\"2.2.1 使能PWM通道\"></a>2.2.1 使能PWM通道</h3><p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210219195306956.png\" alt=\"image-20210219195306956\"></p>\n<p>Internal Clock  内部时钟</p>\n<p>PWM Generation CHx         正向PWM<br>PWM Generation CHxN      反向PWM </p>\n<p>Generation CHx CHxN 一对互补 pwm 输出</p>\n<h3 id=\"2-2-2-配置频率以及占空比\"><a href=\"#2-2-2-配置频率以及占空比\" class=\"headerlink\" title=\"2.2.2 配置频率以及占空比\"></a>2.2.2 配置频率以及占空比</h3><p>频率 = 定时器时钟 / 【（Prescaler 预分频 + 1）*（Counter Period 计数值 + 1）】Hz<br>占空比 = Pulse ( 对比值) / （C ounter Period 计数值）%</p>\n<p>比如：设置定时器时钟为72000000，预分频系数为71，计数值为999，则算出的频率为72000000 / (72 * 1000) = 1000Hz</p>\n<p>需要设置三个值：<strong>Prescaler 预分频</strong>          <strong>Counter Period 计数值</strong>        <strong>Pulse (16 bits value) 初始计数值</strong></p>\n<p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210219201402769.png\" alt=\"image-20210219201402769\"></p>\n<p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210219201422574.png\" alt=\"image-20210219201422574\"></p>\n<h3 id=\"2-2-3-业务代码\"><a href=\"#2-2-3-业务代码\" class=\"headerlink\" title=\"2.2.3 业务代码\"></a>2.2.3 业务代码</h3><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 使能timx的通道y，写到while(1)上边</span></span><br><span class=\"line\">HAL_TIM_PWM_Start(&amp;htimx,TIM_CHANNEL_y);</span><br><span class=\"line\"><span class=\"comment\">// 修改timx的通道y的pwm比较值为z，即修改占空比</span></span><br><span class=\"line\">__HAL_TIM_SET_COMPARE(&amp;htimx, TIM_CHANNEL_y, z);</span><br></pre></td></tr></table></figure>\n<h1 id=\"4-SPWM\"><a href=\"#4-SPWM\" class=\"headerlink\" title=\"4. SPWM\"></a>4. SPWM</h1><p>##4.1 原理</p>\n<p>定时器1输出pwm，定时器2产生中断，不停地修改占空比</p>\n<h2 id=\"4-2-配置pwm\"><a href=\"#4-2-配置pwm\" class=\"headerlink\" title=\"4.2 配置pwm\"></a>4.2 配置pwm</h2><h2 id=\"4-3-配置中断\"><a href=\"#4-3-配置中断\" class=\"headerlink\" title=\"4.3 配置中断\"></a>4.3 配置中断</h2><p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210220162948136.png\" alt=\"image-20210220162948136\"></p>\n<p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210220163011674.png\" alt=\"image-20210220163011674\"></p>\n<h2 id=\"4-4-业务代码\"><a href=\"#4-4-业务代码\" class=\"headerlink\" title=\"4.4 业务代码\"></a>4.4 业务代码</h2><figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*************************************正弦表*************************************/</span></span><br><span class=\"line\"><span class=\"keyword\">int</span> size = <span class=\"number\">100</span>;</span><br><span class=\"line\"><span class=\"keyword\">uint16_t</span> sin_value[] =</span><br><span class=\"line\">&#123;</span><br><span class=\"line\">\t\t<span class=\"number\">500</span>,<span class=\"number\">531</span>,<span class=\"number\">562</span>,<span class=\"number\">593</span>,<span class=\"number\">624</span>,<span class=\"number\">654</span>,<span class=\"number\">684</span>,<span class=\"number\">712</span>,<span class=\"number\">740</span>,<span class=\"number\">767</span>,<span class=\"number\">793</span>,<span class=\"number\">818</span>,<span class=\"number\">842</span>,<span class=\"number\">864</span>,<span class=\"number\">885</span>,<span class=\"number\">904</span>,</span><br><span class=\"line\">\t\t<span class=\"number\">922</span>,<span class=\"number\">938</span>,<span class=\"number\">952</span>,<span class=\"number\">964</span>,<span class=\"number\">975</span>,<span class=\"number\">984</span>,<span class=\"number\">991</span>,<span class=\"number\">996</span>,<span class=\"number\">999</span>,<span class=\"number\">1000</span>,<span class=\"number\">999</span>,<span class=\"number\">996</span>,<span class=\"number\">991</span>,<span class=\"number\">984</span>,<span class=\"number\">975</span>,<span class=\"number\">964</span>,</span><br><span class=\"line\">\t\t<span class=\"number\">952</span>,<span class=\"number\">938</span>,<span class=\"number\">922</span>,<span class=\"number\">904</span>,<span class=\"number\">885</span>,<span class=\"number\">864</span>,<span class=\"number\">842</span>,<span class=\"number\">818</span>,<span class=\"number\">793</span>,<span class=\"number\">767</span>,<span class=\"number\">740</span>,<span class=\"number\">712</span>,<span class=\"number\">684</span>,<span class=\"number\">654</span>,<span class=\"number\">624</span>,<span class=\"number\">593</span>,</span><br><span class=\"line\">\t\t<span class=\"number\">562</span>,<span class=\"number\">531</span>,<span class=\"number\">500</span>,<span class=\"number\">468</span>,<span class=\"number\">437</span>,<span class=\"number\">406</span>,<span class=\"number\">375</span>,<span class=\"number\">345</span>,<span class=\"number\">315</span>,<span class=\"number\">287</span>,<span class=\"number\">259</span>,<span class=\"number\">232</span>,<span class=\"number\">206</span>,<span class=\"number\">181</span>,<span class=\"number\">157</span>,<span class=\"number\">135</span>,</span><br><span class=\"line\">\t\t<span class=\"number\">114</span>,<span class=\"number\">95</span>,<span class=\"number\">77</span>,<span class=\"number\">61</span>,<span class=\"number\">47</span>,<span class=\"number\">35</span>,<span class=\"number\">24</span>,<span class=\"number\">15</span>,<span class=\"number\">8</span>,<span class=\"number\">3</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">0</span>,<span class=\"number\">3</span>,<span class=\"number\">8</span>,<span class=\"number\">15</span>,</span><br><span class=\"line\">\t\t<span class=\"number\">24</span>,<span class=\"number\">35</span>,<span class=\"number\">47</span>,<span class=\"number\">61</span>,<span class=\"number\">77</span>,<span class=\"number\">95</span>,<span class=\"number\">114</span>,<span class=\"number\">135</span>,<span class=\"number\">157</span>,<span class=\"number\">181</span>,<span class=\"number\">206</span>,<span class=\"number\">232</span>,<span class=\"number\">259</span>,<span class=\"number\">287</span>,<span class=\"number\">315</span>,<span class=\"number\">345</span>,</span><br><span class=\"line\">\t\t<span class=\"number\">375</span>,<span class=\"number\">406</span>,<span class=\"number\">437</span>,<span class=\"number\">468</span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">使用之前把这段代码剪切到while(1)上边</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\">HAL_TIM_PWM_Start(&amp;htimx,TIM_CHANNEL_y); <span class=\"comment\">//开启pwm输出</span></span><br><span class=\"line\">HAL_TIM_Base_Start_IT(&amp;htimz);           <span class=\"comment\">//使能定时器z</span></span><br><span class=\"line\"><span class=\"comment\">/*</span></span><br><span class=\"line\"><span class=\"comment\">使用之前把这段代码剪切到while(1)上边</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*************************************定时器中断的回调函数*************************************/</span></span><br><span class=\"line\"><span class=\"comment\">//SPWM频率计算：最大频率 / 【（预分频系数 + 1） * （计数值 + 1）* 周内点数】</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">HAL_TIM_PeriodElapsedCallback</span><span class=\"params\">(TIM_HandleTypeDef *htim)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">\t<span class=\"keyword\">static</span> <span class=\"keyword\">int</span> i = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span>(++i == size)i = <span class=\"number\">0</span>;</span><br><span class=\"line\">\t<span class=\"keyword\">if</span> (htim-&gt;Instance == htim2.Instance)</span><br><span class=\"line\">\t&#123;</span><br><span class=\"line\">\t\t__HAL_TIM_SET_COMPARE(&amp;htim1, TIM_CHANNEL_1, sin_value[i]); <span class=\"comment\">//由向量表修改占空比</span></span><br><span class=\"line\">\t&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n\n\n\n","tags":[{"name":"HAL","slug":"HAL","permalink":"https://xiangheyuhai.github.io/tags/HAL/"}]},{"title":"学习笔记_Git","date":"2021-02-05T14:55:46.000Z","path":"2021/02/05/学习笔记_Git/","content":"<h1 id=\"Git基本理论\"><a href=\"#Git基本理论\" class=\"headerlink\" title=\"Git基本理论\"></a>Git基本理论</h1><p>==四个工作区域==</p>\n<p>Git有四个工作区域：（本地的三个）工作目录、暂存区、资源库、（远程）远程git仓库</p>\n<p>四个区域的转换关系如图：</p>\n<a id=\"more\"></a>\n\n<p>==git的工作流程==</p>\n<p>１、在工作目录中添加、修改文件；</p>\n<p>２、将需要进行版本管理的文件放入暂存区域；<code>git add .</code></p>\n<p>３、将暂存区域的文件提交到git仓库。                <code>git conmmit</code></p>\n<p>4、 推到远程                                                               <code>git push</code></p>\n<h1 id=\"Git项目搭建\"><a href=\"#Git项目搭建\" class=\"headerlink\" title=\"Git项目搭建\"></a>Git项目搭建</h1><p> ==建立仓库==</p>\n<ul>\n<li><p>本地仓库搭建搭建</p>\n<p>右键新建的文件夹–Git Bush Here</p>\n<p>在当前目录建立一个Git代码库   <code>git init</code></p>\n</li>\n<li><p>克隆远程仓库 </p>\n<p><code>git clone 地址</code></p>\n</li>\n</ul>\n<h1 id=\"Git文件操作\"><a href=\"#Git文件操作\" class=\"headerlink\" title=\"Git文件操作\"></a>Git文件操作</h1><p>==Git文件的四种状态==</p>\n<ul>\n<li><p>Untracked: 未跟踪, 此文件在文件夹中, 但并没有加入到git库, 不参与版本控制. 通过<code>git add .</code>状态变为<strong>Staged</strong></p>\n</li>\n<li><p>Unmodify: 文件已经入库, 未修改, 即版本库中的文件快照内容与文件夹中完全一致. 这种类型的文件有两种去处, 如果它被修改, 而变为Modified. 如果使用<code>git rm</code>移出版本库, 则成为<strong>Untracked</strong>文件</p>\n</li>\n<li><p>Modified: 文件已修改, 仅仅是修改, 并没有进行其他的操作. 这个文件也有两个去处, 通过<code>git add .</code>可进入暂存<strong>staged</strong>状态, 使用<code>git checkout</code>则丢弃修改过, 返回到<strong>unmodify</strong>状态, 这个git checkout即从库中取出文件, 覆盖当前修改 !</p>\n</li>\n<li><p>Staged: 暂存状态. 执行<code>git commit</code>则将修改同步到库中, 这时库中的文件和本地文件又变为一致, 文件为<strong>Unmodify</strong>状态. 执行<code>git reset HEAD filename</code>取消暂存, 文件状态为<strong>Modified</strong></p>\n</li>\n</ul>\n<p>==操作命令==</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git status   查看文件状态</span><br><span class=\"line\"><span class=\"number\">1.</span> git add .    添加所有文件到暂存区</span><br><span class=\"line\"><span class=\"number\">2.</span> git commit -m <span class=\"string\">&quot;消息内容&quot;</span>  提交暂存区中的内容到本地仓库</span><br><span class=\"line\">           -m  \t\t信息（message） </span><br><span class=\"line\"><span class=\"number\">3.</span> git push</span><br></pre></td></tr></table></figure>\n<p>==忽略文件==</p>\n<p>​        有些时候我们不想把某些文件纳入版本控制中，比如数据库文件，临时文件，设计文件等</p>\n<p>​        在主目录下建立”.gitignore”文件，此文件有如下规则：</p>\n<ol>\n<li><p>忽略文件中的空行或以井号（#）开始的行将会被忽略。</p>\n</li>\n<li><p>可以使用Linux通配符。例如：星号（*）代表任意多个字符，问号（？）代表一个字符，方括号（[abc]）代表可选字符范围，大括号（{string1,string2,…}）代表可选的字符串等。</p>\n</li>\n<li><p>如果名称的最前面有一个感叹号（!），表示例外规则，将不被忽略。</p>\n</li>\n<li><p>如果名称的最前面是一个路径分隔符（/），表示要忽略的文件在此目录下，而子目录中的文件不忽略。</p>\n</li>\n<li><p>如果名称的最后面是一个路径分隔符（/），表示要忽略的是此目录下该名称的子目录，而非文件（默认文件或目录都忽略）。</p>\n<h1 id=\"Git实际操作\"><a href=\"#Git实际操作\" class=\"headerlink\" title=\"Git实际操作\"></a>Git实际操作</h1></li>\n</ol>\n<p>==提交文件==</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git status   查看文件状态</span><br><span class=\"line\"><span class=\"number\">1.</span> git add .    添加所有文件到暂存区</span><br><span class=\"line\"><span class=\"number\">2.</span> git commit -m <span class=\"string\">&quot;消息内容&quot;</span>  提交暂存区中的内容到本地仓库</span><br><span class=\"line\">           -m  \t\t信息（message） </span><br><span class=\"line\">    或者git commit之后会出现一个界面，输入i，输入提交的备注；按下ESC，退出插入备注界面；输入ZZ恢复正常</span><br><span class=\"line\"><span class=\"number\">3.</span> git push</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git add --all  添加所有文件</span><br><span class=\"line\">git commit -m &#x27;all&#x27;  提交所有文件</span><br><span class=\"line\"><span class=\"function\">git push origion <span class=\"title\">dev</span><span class=\"params\">(你要push的分支)</span></span></span><br></pre></td></tr></table></figure>\n<p>==遇到问题==</p>\n<p><img src=\"https://gitee.com/xiangheyuhai/fan-drawing-bed/raw/master/image-20210203200118601.png\"></p>\n<p>用户名：gitee的账号</p>\n<p>密码：gitee的密码</p>\n","tags":[{"name":"Git","slug":"Git","permalink":"https://xiangheyuhai.github.io/tags/Git/"}]},{"title":"学习笔记_Typora","date":"2021-02-03T14:55:46.000Z","path":"2021/02/03/学习笔记_Typora/","content":"<p>==标题==</p>\n<h1 id=\"一级标题用一个“-”\"><a href=\"#一级标题用一个“-”\" class=\"headerlink\" title=\"一级标题用一个“#”\"></a>一级标题用一个“#”</h1><h1 id=\"内部跳转测试\"><a href=\"#内部跳转测试\" class=\"headerlink\" title=\"内部跳转测试\"></a>内部跳转测试</h1><h2 id=\"二级用2个“-”\"><a href=\"#二级用2个“-”\" class=\"headerlink\" title=\"二级用2个“#”\"></a>二级用2个“#”</h2><a id=\"more\"></a>\n\n<h3 id=\"三级用3个“-”\"><a href=\"#三级用3个“-”\" class=\"headerlink\" title=\"三级用3个“#”\"></a>三级用3个“#”</h3><h4 id=\"四级用4个“-”\"><a href=\"#四级用4个“-”\" class=\"headerlink\" title=\"四级用4个“#”\"></a>四级用4个“#”</h4><h5 id=\"五级用5个“-”\"><a href=\"#五级用5个“-”\" class=\"headerlink\" title=\"五级用5个“#”\"></a>五级用5个“#”</h5><h6 id=\"六级用6个“-”\"><a href=\"#六级用6个“-”\" class=\"headerlink\" title=\"六级用6个“#”\"></a>六级用6个“#”</h6><p>==删除线==</p>\n<p><del>删除线用英文状态下的前后2个波浪号</del></p>\n<p>==斜体==</p>\n<p><em>斜体是前后各加一个星号</em></p>\n<p>==加粗==</p>\n<p><strong>加粗是前后各加2个星号</strong></p>\n<p>==斜体+加粗==</p>\n<p><strong><em>斜体跟加粗是前后各加3个星号</em></strong></p>\n<p>==下划线==</p>\n<p><u>下划线是输入完之后（ctrl + u）</u></p>\n<p>==高亮==</p>\n<p><code>高亮是前后两个等号</code></p>\n<p>==下标==</p>\n<p>下标是前后各加一个波浪号，比如H<del>2</del>O</p>\n<p>==上标==</p>\n<p>上标是前后各加一个小尖尖，比如m^3^</p>\n<p>==表情==</p>\n<p>先写一个英文状态的冒号，再输入英文，比如输入：smile</p>\n<p>:smile:</p>\n<p>:cow: :beer:</p>\n<p>==表格==</p>\n<p>ctrl  + t，选择插入表格</p>\n<table>\n<thead>\n<tr>\n<th>1</th>\n<th>2</th>\n<th>3</th>\n<th>4</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>5</td>\n<td>6</td>\n<td>7</td>\n<td>8</td>\n</tr>\n<tr>\n<td>9</td>\n<td>10</td>\n<td>11</td>\n<td>12</td>\n</tr>\n</tbody></table>\n<p>==引用==</p>\n<p>前面加一个右书名号（&gt;）</p>\n<blockquote>\n<p>不知妻美刘强东</p>\n<blockquote>\n<p>确实</p>\n</blockquote>\n</blockquote>\n<p>==列表==</p>\n<p><code>无序列表：星号+空格</code></p>\n<ul>\n<li>第一点</li>\n<li>第二点</li>\n<li>第三点</li>\n</ul>\n<p><code>有序列表：数字，点，空格</code></p>\n<ol>\n<li>第一点</li>\n<li>第二点</li>\n<li>第三点</li>\n</ol>\n<p>==代码块==</p>\n<p>英文状态下输入三个点（~那个键），语言类型，输入代码</p>\n<figure class=\"highlight c\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#<span class=\"meta-keyword\">include</span> <span class=\"meta-string\">&lt;stdio.h&gt;</span></span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">int</span> <span class=\"title\">main</span><span class=\"params\">(<span class=\"keyword\">void</span>)</span></span></span><br><span class=\"line\"><span class=\"function\"></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>==行内代码==</p>\n<p>内容前后各加一个点</p>\n<p><code>java</code></p>\n<p>==分割线==</p>\n<p>三个*或三个-或三个_</p>\n<hr>\n<hr>\n<hr>\n<p>==跳转==</p>\n<p><code>外部跳转</code>：格式为<code>[link text](link)</code></p>\n<p>比如：<a href=\"http://www.taobao.com/\">按住ctrl跳转到淘宝</a></p>\n<p><code>内部跳转</code>：格式为<code>[link text](#要去的目的地)</code></p>\n<p>比如：<a href=\"#%E5%86%85%E9%83%A8%E8%B7%B3%E8%BD%AC%E6%B5%8B%E8%AF%95\">按住ctrl跳转到内部跳转测试</a></p>\n<p>==插入图片==</p>\n<p><code>网络图片: ！[自己给图片起的名字](图片地址)</code></p>\n<p>比如：</p>\n<p><img src=\"https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=2782264667,4105445696&fm=26&gp=0.jpg\" alt=\"钢铁侠\"></p>\n<p><code>本地图片：！[自己给图片起的名字](如果跟此文档在同一目录下直接用文件名)  或者直接复制进来</code></p>\n","tags":[{"name":"Typora","slug":"Typora","permalink":"https://xiangheyuhai.github.io/tags/Typora/"}]}]